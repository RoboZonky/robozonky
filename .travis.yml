language: java
env:
  global:
    - JAVA_OPTS=-Xmx2g
    - MAVEN_OPTS=$JAVA_OPTS
os:
  - linux
jdk:
  - openjdk8
  - openjdk10
  - oraclejdk8
  - oraclejdk10
  - openjdk-ea
matrix:
  fast_finish: true # fail all if one fails
  allow_failures:
  - jdk: openjdk-ea
cache:
  directories:
  - $HOME/.m2
install: # no tests, parallel build
  - mvn --batch-mode -T1C install -DskipTests -Dgpg.skip
script: # all tests, no assembly
  - mvn --batch-mode test integration-test -Dassembly.skipAssembly -Dgpg.skip
